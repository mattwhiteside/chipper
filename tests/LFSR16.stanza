#include("src/chipper.stanza")

#use-syntax(core, chipper)

defpackage lfsr16 :
   import core
   import verse
   import chipper

defmodule LFSR16 :
  input inc : Bool
  output out : UInt<16>
  reg res : UInt<16>
  ;; when reset: 
  when inc :
    node nxt_res = cat(res[0] ^ res[2] ^ res[3] ^ res[5], res[15,1]) 
    res := nxt_res
  out := res

defn main () :
   circuit c of LFSR16()
   println(c)

main()
